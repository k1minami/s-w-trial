<html>
<head>
  <link rel="manifest" href="./manifest.json">
  <title>v0306-3 サービスワーカーお試しページでございます</title>
</head>
<body>
  
<script>
window.addEventListener('load', function() {
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/s-w-trial/sw.js')
      .then(function(registration) {
        return registration.pushManager.getSubscription().then(function(subscription) {
          if (subscription) {
            return subscription
          }
          return registration.pushManager.subscribe({
            userVisibleOnly: true
          })
        })
      }).then(function(subscription) {
        var endpoint = subscription.endpoint
        console.log("pushManager endpoint:", endpoint) // https://android.googleapis.com/gcm/send/******:******......
      }).catch(function(error) {
        console.warn("serviceWorker error:", error)
      })
  }
})
</script>

  HeLLo, index page.<br>
  <img src="./img/moutakuto.png" alt="毛沢東">
  <a href="./second.html">go next page</a><br>

  
<script src="https://www.gstatic.com/firebasejs/5.8.5/firebase.js"></script>
<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyDwt40xRZ4l0J44IMEuJrapEY4q-0VcRJ4",
    authDomain: "fir-w-trial.firebaseapp.com",
    databaseURL: "https://fir-w-trial.firebaseio.com",
    projectId: "s-w-trial",
    storageBucket: "s-w-trial.appspot.com",
    messagingSenderId: "419458027222"
  };
  firebase.initializeApp(config);
</script>
  
</body>
</html>
